<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport">
    <link rel="stylesheet" href="style.css">
    <title>Cars Details</title>
  </head>
  <body onload="showdetails();">
    <!-- start show details from cars page -->
    <div id="carDetails">
      <div id="carName">Car Name: </div>
      <div id="carPrice">Car Price: </div>
      <div id="carDate">Car Date: </div>
      <div id="carRent">Car Rent: </div>
      <img id="carPhoto" alt="car_photo"></img>
    </div>
    <!-- end show details from cars page -->
    <!-- start show more details -->
    <div class="carmoredetails">
      <div id="BMW" style="display: none;">
        <img src="images/BMW.jfif" alt="BMW">
        <div>Car colors: there are white and blue</div>
        <div>Car chairs: 4</div>
      </div>
      <div id="ferrari" style="display: none;">
        <img src="images/ferrari.jfif" alt="ferrari">
        <div>Car colors: there are white and yellow</div>
        <div>Car chairs: 2</div>
      </div>
      <div id="Cadillac" style="display: none;">
        <img src="images/Cadillac.jfif" alt="Cadillac">
        <div>Car colors: there are white and red</div>
        <div>Car chairs: 4</div>
      </div>
      <div id="KIA" style="display: none;">
        <img src="images/KIA.jfif" alt="KIA">
        <div>Car colors: there are grey and black</div>
        <div>Car chairs: 4</div>
      </div>
      <div id="lexes" style="display: none;">
        <img src="images/Lexes.jfif" alt="lexes">
        <div>Car colors: there are black and red</div>
        <div>Car chairs: 2 or 4</div>
      </div>
      <div id="Mercedes" style="display: none;">
        <img src="images/Mercedes2.jpg" alt="Mercedes">
        <div>Car colors: there are white and grey</div>
        <div>Car chairs: 4</div>
      </div>
      <div id="Nissan" style="display: none;">
        <img src="images/Nissan.jfif" alt="Nissan">
        <div>Car colors: there are white and blue</div>
        <div>Car chairs: 4</div>
      </div>
      <div id="range rover" style="display: none;">
        <img src="images/range rover.png" alt="range rover">
        <div>Car colors: there are white and red</div>
        <div>Car chairs: 4</div>
      </div>
      <div id="Rolls-Royce" style="display: none;">
        <img src="images/Rolls-Royce.jfif" alt="Rolls-Royce">
        <div>Car colors: there are black and grey</div>
        <div>Car chairs: 2 or 4</div>
      </div>
      <div id="Toyota" style="display: none;">
        <img src="images/Toyota.jfif" alt="Toyota">
        <div>Car colors: there are white and blue</div>
        <div>Car chairs: 4</div>
      </div>
      <table id="calc">
        <caption>*Description of rent value</caption>
        <tr>
          <th>Description</th>
          <th>Calculation</th>
        </tr>
        <tr>
          <td>The rent</td>
          <td id="carrent"></td>
        </tr>
        <tr>
          <td>Reconstruction fees (1%)</td>
          <td id="fees"></td>
        </tr>
        <tr>
          <td>Taxes (5%)</td>
          <td id="tax"></td>
        </tr>
      </table>
    </div>
    <!-- end show more details -->
    <!-- start buttons -->
    <div class="buttons">
      <div id="validbutton" onclick="check();addcaptcha();">
        <input id="check" type="checkbox"></input>
        <label>continue</label>
      </div>
      <a href="Cars.html"><input type="button" value="Cancel" id="button"></input></a>
    </div>
    <!-- end buttons -->
    <!-- start form -->
    <form id="buyform" action=" " style="display: none;">
      <table id="buytable">
        <tr>
          <td>Name:<i>*</i></td>
          <td><input type="text" id="costmer_name" required placeholder="Enter your name in arabic" onKeyup="CheckName();" onblur="CheckName(); "><p id="NamSucc" class="succ"></p>
            <div>
              <small class="error" id="errName"></small>
            </div>
          </td>
        </tr>
        <tr>
          <td>National Number:<i>*</i></td>
          <td><input type="text" id="costmer_nationalnumb" maxlength="11" required placeholder="Enter your national Id" onKeyup="CheckId();" onblur="CheckId();";><p id="IdSucc" class="succ"></p>
            <div>
              <small class="error" id="errId"></small>
            </div>
          </td>
        </tr>
        <tr>
          <td>Birthday:<i>*</i></td>
          <td><input type="date" id="birthdate" id="birthdate" required onKeyup="CheckDate();" onblur="CheckDate();" ><p class="succ" id="DatSucc"></p>
            <div>
              <small class="error" id="errDate"></small>
            </div>
          </td>
        </tr>
        <tr>
          <td>Phone Number:<i>*</i></td>
          <td><input type="tel" id="costmer_phone" name="phone" required placeholder="Enter your phone number" onKeyup="CheckPhone();" onblur="CheckPhone();"><p class="succ" id="NumSucc"></p>
            <div>
              <small class="error" id="errNumber"></small>
            </div>
          </td>
        </tr>
        <tr>
          <td>Email:<i>*</i></td>
          <td><input type="email" id="costmer_email" required placeholder="Enter your Email" onkeyup="CheckEmail();" onblur="CheckEmail();"><p class="succ" id="EmailSucc"></p>
            <div>
              <small class="error" id="errEmail"></small>
            </div>
          </td>
        </tr>
        <tr>
          <td>Rent Time:<i>*</i>
            <p id="note"></p>
          </td>
          <td><input type="number" size="5" min="1" id="costmer_rent" required placeholder="Enter how much you need the car" onKeyup="CheckRent();" onblur="CheckRent();"><p class="succ" id="RentSucc"></p>
            <div>
              <small class="error" id="errRent"></small>
            </div>
          </td>
        </tr>
        <tr>
          <td>Captcha:<img id="refresh" src="images/R.png" alt="captcha" onclick="addcaptcha();"></td>
          <td><div type="text" id="captcha"></div></td>
        </tr>
        <td>Enter captcha:<i>*</i></td>
        <td><input type="text" id="validate_captcha" required placeholder="Enter the captcha" onchange="ValidCaptcha();" onblur="ValidCaptcha();" ><p class="succ" id="CaptchaSucc"></p>
          <div>
            <small class="error" id="errCaptcha"></small>
        </div>
        </td>
      </tr>
        <tr>
          <td><input type="submit" value="Submit" id="button" onclick="ValidationForm();"></td>
          <td><input type="reset" value="reset" id="button" onclick="addcaptcha(); OnReset();"></td>
        </tr>
      </table>
    </form>
    <!-- end form -->
    <script>
      const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);
var name = urlParams.get("car");
var price = urlParams.get("price");
var date = urlParams.get("date");
var rent = urlParams.get("rent");
var photo = urlParams.get("photo");
document.getElementById("carName").innerHTML += name;
document.getElementById("carPrice").innerHTML += price + " S.P";
document.getElementById("carDate").innerHTML += date;
let p = document.getElementById("carPhoto").src = photo;
document.getElementById("carRent").innerHTML += rent;

function showdetails(){
  var elem = document.getElementById("BMW");
  if (name == "BMW") elem.style.display = "block";
  var elem = document.getElementById("ferrari");
  if (name == "ferrari") elem.style.display = "block";
  var elem = document.getElementById("Cadillac");
  if (name == "Cadillac") elem.style.display = "block";
  var elem = document.getElementById("KIA");
  if (name == "KIA") elem.style.display = "block";
  var elem = document.getElementById("lexes");
  if (name == "Lexes") elem.style.display = "block";
  var elem = document.getElementById("Mercedes");
  if (name == "Mercedes") elem.style.display = "block";
  var elem = document.getElementById("Nissan");
  if (name == "Nissan") elem.style.display = "block";
  var elem = document.getElementById("range rover");
  if (name == "range rover") elem.style.display = "block"; 
  var elem = document.getElementById("Rolls-Royce");
  if (name == "Rolls-Royce") elem.style.display = "block";  
  var elem = document.getElementById("Toyota");
  if (name == "Toyota") elem.style.display = "block";
}

var carRent = parseInt(price) / 1.06;
var fees=carRent/100;
var taxes=carRent*0.05;
document.getElementById("carrent").innerHTML = parseInt(carRent)+ " S.P";
document.getElementById("fees").innerHTML = parseInt(fees) + " S.P";
document.getElementById("tax").innerHTML = parseInt(taxes)+" S.P";

function check(){
  if(document.getElementById("check").checked ="checked")
  document.getElementById("buyform").style.display="block";
  document.getElementById("note").innerHTML = "(Remember it's " + rent + " rent)"
}
function addcaptcha(){

  var alpha=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V'
      ,'W','X','Y','Z','1','2','3','4','5','6','7','8','9','0','a','b','c','d','e','f','g','h','i',
  'j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];

  var a=alpha[Math.floor(Math.random()*62)];
  var b=alpha[Math.floor(Math.random()*62)];
  var c=alpha[Math.floor(Math.random()*62)];
  var d=alpha[Math.floor(Math.random()*62)];
  var e=alpha[Math.floor(Math.random()*62)];
  var f=alpha[Math.floor(Math.random()*62)];

  var sum=a + b + c + d + e + f;

  document.getElementById("captcha").innerHTML=sum;
  };


  function FieldRequired(value, errid) {
      if (!value) {
          document.getElementById(errid).innerHTML = "This field is required.";
          return false;
      } else {
          document.getElementById(errid).innerHTML = "";
          return true;
      }
  }


  var co_name = document.getElementById("costmer_name");
  var co_Nationalnumb = document.getElementById("costmer_nationalnumb");
  var co_number = document.getElementById("costmer_phone");
  var co_email = document.getElementById("costmer_email");
  var co_birthdate = document.getElementById("birthdate");
  var co_rent = document.getElementById("costmer_rent");
  
  function CheckName() {
      if (!FieldRequired(co_name.value, "errName")) return false;
      var name_check = /[ا-ي]+\s[ا-ي]+$/;
      var pos = co_name.value.search(name_check);
      if (pos != 0) {
          var text = "Full Name only has letters.";
          document.getElementById("errName").innerHTML = text;
          document.getElementById("NamSucc").innerHTML= "";
          co_name.focus();
          return false;
      } else {
          document.getElementById("errName").innerHTML = "";
          document.getElementById("NamSucc").innerHTML= "√";
          return true;
      }
  }

  function CheckId() {
      if (!FieldRequired(co_Nationalnumb.value, "errId")) return false;
      var Nationalnumb_check = /^0[1-9]\d{9}$|1[0-4]\d{9}$/;
      var pos = co_Nationalnumb.value.search(Nationalnumb_check);
      if (pos != 0) {
          var text = "The national number is incorrect It must consist of 11 digits and the two digits to the left symbolize the governorate (01-02-03-04-05-06-07-08-09-10-11-12-13-14";
          document.getElementById("errId").innerHTML = text;
          document.getElementById("IdSucc").innerHTML= "";
          co_Nationalnumb.focus();
          return false;
      } else {
          document.getElementById("errId").innerHTML = "";
          document.getElementById("IdSucc").innerHTML= "√";
          return true;
      }
  }

  function CheckPhone() {
      if (!FieldRequired(co_number.value, "errNumber")) return false;
      var pos = co_number.value.search(/09[^0127]\d{7}$/);
      if (pos != 0) {
          var text = "Phone Number has to start 09 and must consist of 10 numbers and must match the MTN and Syriatel numbers";
          document.getElementById("NumSucc").innerHTML= "";
          document.getElementById("errNumber").innerHTML = text;
          co_number.focus();
          return false;
      } else {
          document.getElementById("errNumber").innerHTML = "";
          document.getElementById("NumSucc").innerHTML= "√";
          return true;
      }
  };

  function CheckEmail() {
      if (!FieldRequired(co_email.value, "errEmail")) return false;
      var pos = co_email.value.search(/^[^\s@]+@[^\s@]+\.[^\s@.]+$/);
      if (pos != 0) {
          var text = "You have entered an invalid email address : someone@example.com";
          document.getElementById("EmailSucc").innerHTML= "";
          document.getElementById("errEmail").innerHTML = text;
          co_email.focus();
          return false;
      } else {
          document.getElementById("errEmail").innerHTML = "";
          document.getElementById("EmailSucc").innerHTML= "√";
          return true;
      }
  };

  function ValidCaptcha() {
      var string1 = document.getElementById('captcha').innerText;
      var string2 = document.getElementById('validate_captcha').value;
      if (string1 == string2 ) {
            document.getElementById("CaptchaSucc").innerHTML= "√";
            document.getElementById('errCaptcha').innerText = "";
          return true;
      } else {
          document.getElementById('CaptchaSucc').innerText = "";
          document.getElementById('errCaptcha').innerText = "Mismatch";
          return false;
      }
  }
  function CheckDate() {
      if (!FieldRequired(co_birthdate.value, "errDate")){
        document.getElementById("DatSucc").innerHTML= "";
        return false;
      }
      else {
        document.getElementById("DatSucc").innerHTML= "√";
        return true;
      } 
  };
  function CheckRent() {
      if (!FieldRequired(co_rent.value, "errRent")){
        document.getElementById("RentSucc").innerHTML= "";
        return false;
      }
      else {
        document.getElementById("RentSucc").innerHTML= "√";
        return true;
      }
  };


  function ValidationForm() {
      ValidCaptcha();
      CheckName();
      CheckId();
      CheckPhone();
      CheckEmail();
      CheckRent();
      CheckDate();
      if (ValidCaptcha() && CheckName() && CheckId() && CheckPhone() && CheckEmail() && CheckRent() && CheckDate())
          alert ("Your name is: " + co_name.value +"\n"+ 
      "Your National number is: " + co_Nationalnumb.value + "\n" +
      "Your Birthday is: " + co_birthdate.value + "\n" +
      "Your phone number is: " + co_number.value + "\n" +
      "Your email is: " + co_email.value + "\n" +
      "you need the car for: " + co_rent.value );
      else (alert("please enter a valid data"));;

    };

    function OnReset() {
        document.getElementById("RentSucc").innerHTML= "";
        document.getElementById("DatSucc").innerHTML= "";
        document.getElementById('CaptchaSucc').innerText = "";
        document.getElementById("EmailSucc").innerHTML= "";
        document.getElementById("NumSucc").innerHTML= "";
        document.getElementById("IdSucc").innerHTML= "";
        document.getElementById("NamSucc").innerHTML= "";
      }
    </script>
  </body>
</html>

